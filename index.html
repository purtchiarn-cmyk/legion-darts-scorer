<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Legion Darts Scorer</title>
<style>
/* --- CSS Start --- */
:root{
  --bg1: #eaf4ff;
  --bg2: #d6ecff;
  --accent: #0b66ff;
  --muted: #6b7a86;
  --card: #ffffff;
  --shadow: 0 6px 20px rgba(11,102,255,0.08);
  --rounded: 12px;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
}
body{
  margin:0;
  min-height:100vh;
  background: linear-gradient(180deg,var(--bg1),var(--bg2));
  color:#0b2330;
}
header.topbar{
  background: var(--accent);
  color:white;
  padding: 1rem;
  display:flex;
  justify-content: space-between;
  align-items:center;
  font-weight:bold;
}
.container{
  padding:1rem;
}
.card{
  background: var(--card);
  padding:1rem;
  margin-bottom:1rem;
  border-radius: var(--rounded);
  box-shadow: var(--shadow);
}
.scoreboard{
  display:flex;
  justify-content: space-between;
  gap:1rem;
  flex-wrap: wrap;
}
.player{
  flex:1 1 45%;
}
.player-name{
  font-weight:bold;
}
.score{
  font-size:2rem;
  margin:0.5rem 0;
}
.turn-area{
}
.entry-grid{
  display:flex;
  gap:0.5rem;
  margin-top:0.5rem;
}
.multiplier-col{
  display:flex;
  flex-direction:column;
  gap:0.5rem;
}
.numbers-col{
  display:grid;
  grid-template-columns: repeat(7, 1fr);
  gap:0.5rem;
}
button.btn{
  padding:0.5rem;
  border:none;
  border-radius:6px;
  background: var(--accent);
  color:white;
  font-weight:bold;
}
button.btn.small{padding:0.3rem;font-size:0.9rem;}
button.btn.ghost{background:#eee;color:#333;}
.darts-list{
  margin-top:0.5rem;
}
/* --- CSS End --- */
</style>
</head>
<body>

<header class="topbar">Legion Darts Scorer</header>

<div class="container">
  <div class="scoreboard">
    <div class="player card" id="player-home">
      <div class="player-name" id="name-home">Home (P1)</div>
      <div class="score" id="score-home">501</div>
    </div>
    <div class="player card" id="player-away">
      <div class="player-name" id="name-away">Away (P2)</div>
      <div class="score" id="score-away">501</div>
    </div>
  </div>

  <div class="turn-area card">
    <div id="turn-player">Current: <strong id="current-player-label">Home (P1)</strong></div>
    <div class="current-darts">
      <div id="darts-list">No darts yet</div>
      <div>Turn Total: <span id="turn-total">0</span></div>
    </div>
    <div class="entry-grid">
      <div class="multiplier-col">
        <button class="btn" data-mult="2" id="btn-D">D</button>
        <button class="btn" data-mult="3" id="btn-T">T</button>
      </div>
      <div class="numbers-col" id="numbers-col">
        <!-- numbers injected by JS -->
      </div>
    </div>
    <div style="margin-top:0.5rem;">
      <button class="btn" id="undo-dart">Undo Dart</button>
      <button class="btn" id="next-player">Next Player</button>
    </div>
  </div>
</div>

<script>
/* --- JS Start --- */
let players = [
  {name:"Home (P1)", score:501, darts:0},
  {name:"Away (P2)", score:501, darts:0}
];
let currentPlayer = 0;
let turnDarts = [];
let multiplier = 1;

const scoreHomeEl = document.getElementById("score-home");
const scoreAwayEl = document.getElementById("score-away");
const currentPlayerLabel = document.getElementById("current-player-label");
const dartsList = document.getElementById("darts-list");
const turnTotalEl = document.getElementById("turn-total");
const numbersCol = document.getElementById("numbers-col");

function updateDisplay(){
  scoreHomeEl.textContent = players[0].score;
  scoreAwayEl.textContent = players[1].score;
  currentPlayerLabel.textContent = players[currentPlayer].name;
  dartsList.textContent = turnDarts.length ? turnDarts.join(", ") : "No darts yet";
  turnTotalEl.textContent = turnDarts.reduce((a,b)=>a+b,0);
}

function addDart(num){
  let score = num * multiplier;
  if(players[currentPlayer].score - score < 0){
    score = 0; // bust
  }
  players[currentPlayer].score -= score;
  turnDarts.push(score);
  multiplier = 1; // reset
  updateDisplay();
}

document.getElementById("btn-D").addEventListener("click",()=>{multiplier=2;});
document.getElementById("btn-T").addEventListener("click",()=>{multiplier=3;});

for(let i=1;i<=20;i++){
  let btn = document.createElement("button");
  btn.className = "btn";
  btn.textContent=i;
  btn.addEventListener("click",()=>addDart(i));
  numbersCol.appendChild(btn);
}

document.getElementById("undo-dart").addEventListener("click",()=>{
  if(turnDarts.length){
    players[currentPlayer].score += turnDarts.pop();
    updateDisplay();
  }
});

document.getElementById("next-player").addEventListener("click",()=>{
  turnDarts=[];
  currentPlayer = 1 - currentPlayer;
  updateDisplay();
});

updateDisplay();
/* --- JS End --- */
</script>

</body>
</html>

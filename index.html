<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Legion Darts Scorer</title>
<style>
/* --- CSS Start --- */
:root{
  --bg1:#eaf4ff;
  --bg2:#d6ecff;
  --accent:#0b66ff;
  --accent2:#0b94ff;
  --muted:#6b7a86;
  --card:#ffffff;
  --shadow:0 6px 20px rgba(11,102,255,0.08);
  --rounded:12px;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;
}
body{
  margin:0;
  min-height:100vh;
  background: linear-gradient(180deg,var(--bg1),var(--bg2));
  color:#0b2330;
}
header.topbar{
  background: var(--accent);
  color:white;
  padding:1rem;
  font-weight:bold;
  text-align:center;
}
.container{
  padding:0.5rem;
}
.scoreboard{
  display:flex;
  gap:0.5rem;
  margin-bottom:0.5rem;
}
.player{
  flex:1 1 45%;
  background:var(--card);
  border-radius:var(--rounded);
  padding:0.5rem;
  box-shadow:var(--shadow);
}
.player-name{
  font-weight:bold;
}
.score{
  font-size:2rem;
  margin:0.3rem 0;
}
.legs{
  font-size:0.9rem;
  color:var(--muted);
}
.darts-mini{
  font-size:0.85rem;
  margin-top:0.3rem;
}
.turn-area{
  background:var(--card);
  padding:0.5rem;
  border-radius:var(--rounded);
  box-shadow:var(--shadow);
  margin-bottom:0.5rem;
}
.current-darts{
  display:flex;
  gap:0.3rem;
  margin-bottom:0.3rem;
  flex-wrap:wrap;
}
.current-darts button{
  flex:1;
  min-width:40px;
  padding:0.4rem;
  border:none;
  border-radius:6px;
  background:#eee;
}
.current-darts button.current{
  background:var(--accent2);
  color:white;
}
.entry-grid{
  display:flex;
  gap:0.5rem;
}
.multiplier-col{
  display:flex;
  flex-direction:column;
  gap:0.3rem;
}
.numbers-col{
  display:grid;
  grid-template-columns: repeat(4,1fr);
  gap:0.3rem;
  flex:1;
}
button.btn{
  padding:0.5rem;
  border:none;
  border-radius:6px;
  background: var(--accent);
  color:white;
  font-weight:bold;
  font-size:1rem;
}
button.btn.small{padding:0.3rem;font-size:0.9rem;}
button.btn.ghost{background:#eee;color:#333;}
.controls{
  display:flex;
  gap:0.3rem;
  margin-top:0.3rem;
}
/* --- CSS End --- */
</style>
</head>
<body>

<header class="topbar">Legion Darts Scorer</header>

<div class="container">
  <div class="scoreboard">
    <div class="player" id="player-home">
      <div class="player-name" id="name-home">Home (P1)</div>
      <div class="score" id="score-home">501</div>
      <div class="legs" id="legs-home">Legs: 0</div>
      <div class="darts-mini" id="darts-mini-home">Darts: 0</div>
    </div>
    <div class="player" id="player-away">
      <div class="player-name" id="name-away">Away (P2)</div>
      <div class="score" id="score-away">501</div>
      <div class="legs" id="legs-away">Legs: 0</div>
      <div class="darts-mini" id="darts-mini-away">Darts: 0</div>
    </div>
  </div>

  <div class="turn-area">
    <div>Current: <strong id="current-player-label">Home (P1)</strong></div>
    <div class="current-darts" id="darts-list">No darts yet</div>
    <div>Turn Total: <span id="turn-total">0</span></div>
    <div class="entry-grid">
      <div class="multiplier-col">
        <button class="btn" data-mult="2" id="btn-D">D</button>
        <button class="btn" data-mult="3" id="btn-T">T</button>
        <button class="btn" data-mult="1" id="btn-25">25</button>
        <button class="btn" data-mult="1" id="btn-Bull">Bull</button>
        <button class="btn" data-mult="0" id="btn-0">0</button>
      </div>
      <div class="numbers-col" id="numbers-col">
        <!-- numbers 1–20 injected by JS -->
      </div>
    </div>
    <div class="controls">
      <button class="btn" id="undo-dart">Undo Dart</button>
      <button class="btn" id="next-player">Next Player</button>
    </div>
  </div>
</div>

<script>
/* --- JS Start --- */
let players=[
  {name:"Home (P1)",score:501,darts:0},
  {name:"Away (P2)",score:501,darts:0}
];
let currentPlayer=0;
let turnDarts=[];
let multiplier=1;
let editingIndex=null;

const scoreHomeEl=document.getElementById("score-home");
const scoreAwayEl=document.getElementById("score-away");
const currentPlayerLabel=document.getElementById("current-player-label");
const dartsListEl=document.getElementById("darts-list");
const turnTotalEl=document.getElementById("turn-total");
const numbersCol=document.getElementById("numbers-col");

function updateDisplay(){
  scoreHomeEl.textContent=players[0].score;
  scoreAwayEl.textContent=players[1].score;
  currentPlayerLabel.textContent=players[currentPlayer].name;
  // Update darts list
  dartsListEl.innerHTML="";
  if(turnDarts.length===0)dartsListEl.textContent="No darts yet";
  else{
    turnDarts.forEach((dart,i)=>{
      const btn=document.createElement("button");
      btn.textContent=dart.label;
      if(i===editingIndex)btn.classList.add("current");
      btn.addEventListener("click",()=>editDart(i));
      dartsListEl.appendChild(btn);
    });
  }
  turnTotalEl.textContent=turnDarts.reduce((a,b)=>a.value+b.value,0);
  // Update mini stats
  document.getElementById("darts-mini-home").textContent=`Darts: ${players[0].darts}`;
  document.getElementById("darts-mini-away").textContent=`Darts: ${players[1].darts}`;
}

function addDart(value,label){
  if(editingIndex!==null){
    // revert previous value
    players[currentPlayer].score += turnDarts[editingIndex].value;
    turnDarts[editingIndex]={value,label};
    editingIndex=null;
  } else{
    turnDarts.push({value,label});
  }
  players[currentPlayer].score -= value;
  players[currentPlayer].darts++;
  updateDisplay();
}

function editDart(i){
  editingIndex=i;
  multiplier=1;
  updateDisplay();
}

// inject number buttons 1–20
for(let i=1;i<=20;i++){
  let btn=document.createElement("button");
  btn.className="btn";
  btn.textContent=i;
  btn.addEventListener("click",()=>addDart(i*multiplier,`${multiplier===1?""+(i):multiplier+i}`));
  numbersCol.appendChild(btn);
}

// D/T/25/Bull/0 buttons
document.getElementById("btn-D").addEventListener("click",()=>{multiplier=2;});
document.getElementById("btn-T").addEventListener("click",()=>{multiplier=3;});
document.getElementById("btn-25").addEventListener("click",()=>addDart(25,"25"));
document.getElementById("btn-Bull").addEventListener("click",()=>addDart(50,"Bull"));
document.getElementById("btn-0").addEventListener("click",()=>addDart(0,"0"));

// Undo dart
document.getElementById("undo-dart").addEventListener("click",()=>{
  if(turnDarts.length){
    const removed=turnDarts.pop();
    players[currentPlayer].score += removed.value;
    players[currentPlayer].darts--;
    updateDisplay();
  }
});

// Next player
document.getElementById("next-player").addEventListener("click",()=>{
  turnDarts=[];
  editingIndex=null;
  multiplier=1;
  currentPlayer=1-currentPlayer;
  updateDisplay();
});

updateDisplay();
/* --- JS End --- */
</script>

</body>
</html>